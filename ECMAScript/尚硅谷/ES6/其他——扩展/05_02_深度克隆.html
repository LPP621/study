<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>05_02_深度克隆</title>
</head>
<body>
<script>
    /*
    * 拷贝数据：
    *     基本数据类型：
    *        拷贝后会生成一份新的数据，修改拷贝后的数据不会影响原数据
    *     对象/数组
    *        拷贝后不会生成新的数据，而是拷贝之后引用，修改拷贝以后的数据会影响原来的数据
    * 拷贝数据的方法（数组/对象）：
    *    1、直接赋值给一个变量     // 浅拷贝
    *    2、Object.assign()      // 浅拷贝
    *    3、Array.prototype.concat()      // 浅拷贝
    *    4、Array.prototype.slice()       // 浅拷贝
    *    5、JSON.parse(JSON.stringify())      // 深拷贝（深度克隆），拷贝的数据里面不能有函数，处理不了
    * 浅拷贝（对象/数组）：
    *    特点： 拷贝的引用，修改拷贝以后的数据会影响原数据，使得原数据不安全
    * 深拷贝（对象/数组）：
    *    特点： 拷贝的时候生成新数据，修改拷贝以后的数据不会影响原数据
    */
    let obj1 = {username: 'kobe'};
    let obj2 = obj1;
    console.log(obj2);     // Object {username: 'kobe'}
    obj2.username = 'change';
    console.log('obj1.username = ' + obj1.username);      //  obj1.username = change

    let arr1 = [1, 3, {username: 'kobe'}];
    let arr2 = arr1.concat();
    console.log(arr2);      //  [1, 3, {username: 'kobe'}]
    arr2[0] = 'abc';
    console.log(arr1[0]);    // 1     基本数据类型不会影响原数据
    arr2[2].username = 'change';
    console.log(arr1[2].username);    // change

    let arr3 = arr1.slice();
    arr3[2].username = 'change111';
    console.log(arr3[2].username);    // change111

    let arr4 =JSON.stringify(arr1);
    console.log(arr4);       // [1,3,{"username":"change111"}]

    let arr5 = JSON.parse(JSON.stringify(arr1));
    console.log(arr5);       // (3) [1, 3, {…}]
</script>
</body>
</html>